<html>

<head>
   <title>Bruno Dantas de Paiva</title>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
   <link type="text/css" rel="stylesheet" href="./assets/css/404.css">
</head>

<body>
   <div id="banner">
      <h1>404 :(</h1>
      <p>Pelo visto você acessou uma página incorreta.</p>
      <a href="./">Retonar a página principal.</a>
   </div>
   <script type="module">

      import * as THREE from 'https://threejs.org/build/three.module.js';

      import { OrbitControls } from 'https://threejs.org/examples/jsm/controls/OrbitControls.js';

      let camera, controls;
      let renderer;
      let scene;

      init();
      animate();

      function init() {

         const container = document.getElementById('container');

         renderer = new THREE.WebGLRenderer();
         renderer.setPixelRatio(window.devicePixelRatio);
         renderer.setSize(window.innerWidth, window.innerHeight);
         container.appendChild(renderer.domElement);

         scene = new THREE.Scene();

         camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 100);
         camera.position.z = 0.01;

         controls = new OrbitControls(camera, renderer.domElement);
         controls.enableZoom = false;
         controls.enablePan = false;
         controls.enableDamping = true;
         controls.rotateSpeed = - 0.25;

         const textures = getTexturesFromAtlasFile("https://threejs.org/examples/textures/cube/sun_temple_stripe.jpg", 6);

         const materials = [];

         for (let i = 0; i < 6; i++) {

            materials.push(new THREE.MeshBasicMaterial({ map: textures[i] }));

         }

         const skyBox = new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), materials);
         skyBox.geometry.scale(1, 1, - 1);
         scene.add(skyBox);

         window.addEventListener('resize', onWindowResize);

      }

      function getTexturesFromAtlasFile(atlasImgUrl, tilesNum) {

         const textures = [];

         for (let i = 0; i < tilesNum; i++) {

            textures[i] = new THREE.Texture();

         }

         const imageObj = new Image();

         imageObj.onload = function () {

            let canvas, context;
            const tileWidth = imageObj.height;

            for (let i = 0; i < textures.length; i++) {

               canvas = document.createElement('canvas');
               context = canvas.getContext('2d');
               canvas.height = tileWidth;
               canvas.width = tileWidth;
               context.drawImage(imageObj, tileWidth * i, 0, tileWidth, tileWidth, 0, 0, tileWidth, tileWidth);
               textures[i].image = canvas;
               textures[i].needsUpdate = true;

            }

         };

         imageObj.src = atlasImgUrl;

         return textures;

      }

      function onWindowResize() {

         camera.aspect = window.innerWidth / window.innerHeight;
         camera.updateProjectionMatrix();

         renderer.setSize(window.innerWidth, window.innerHeight);

      }

      function animate() {

         requestAnimationFrame(animate);

         controls.update(); // required when damping is enabled

         renderer.render(scene, camera);

      }

   </script>

</body>

</html>